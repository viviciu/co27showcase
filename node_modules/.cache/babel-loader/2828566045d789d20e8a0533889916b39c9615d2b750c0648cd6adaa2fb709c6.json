{"ast":null,"code":"import { Controls, MOUSE, Quaternion, Spherical, TOUCH, Vector2, Vector3, Plane, Ray, MathUtils } from 'three';\n\n// OrbitControls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nconst _changeEvent = {\n  type: 'change'\n};\nconst _startEvent = {\n  type: 'start'\n};\nconst _endEvent = {\n  type: 'end'\n};\nconst _ray = new Ray();\nconst _plane = new Plane();\nconst _TILT_LIMIT = Math.cos(70 * MathUtils.DEG2RAD);\nconst _v = new Vector3();\nconst _twoPI = 2 * Math.PI;\nconst _STATE = {\n  NONE: -1,\n  ROTATE: 0,\n  DOLLY: 1,\n  PAN: 2,\n  TOUCH_ROTATE: 3,\n  TOUCH_PAN: 4,\n  TOUCH_DOLLY_PAN: 5,\n  TOUCH_DOLLY_ROTATE: 6\n};\nconst _EPS = 0.000001;\nclass OrbitControls extends Controls {\n  constructor(object, domElement = null) {\n    super(object, domElement);\n    this.state = _STATE.NONE;\n\n    // Set to false to disable this control\n    this.enabled = true;\n\n    // \"target\" sets the location of focus, where the object orbits around\n    this.target = new Vector3();\n\n    // Sets the 3D cursor (similar to Blender), from which the maxTargetRadius takes effect\n    this.cursor = new Vector3();\n\n    // How far you can dolly in and out ( PerspectiveCamera only )\n    this.minDistance = 0;\n    this.maxDistance = Infinity;\n\n    // How far you can zoom in and out ( OrthographicCamera only )\n    this.minZoom = 0;\n    this.maxZoom = Infinity;\n\n    // Limit camera target within a spherical area around the cursor\n    this.minTargetRadius = 0;\n    this.maxTargetRadius = Infinity;\n\n    // How far you can orbit vertically, upper and lower limits.\n    // Range is 0 to Math.PI radians.\n    this.minPolarAngle = 0; // radians\n    this.maxPolarAngle = Math.PI; // radians\n\n    // How far you can orbit horizontally, upper and lower limits.\n    // If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n    this.minAzimuthAngle = -Infinity; // radians\n    this.maxAzimuthAngle = Infinity; // radians\n\n    // Set to true to enable damping (inertia)\n    // If damping is enabled, you must call controls.update() in your animation loop\n    this.enableDamping = false;\n    this.dampingFactor = 0.05;\n\n    // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n    // Set to false to disable zooming\n    this.enableZoom = true;\n    this.zoomSpeed = 1.0;\n\n    // Set to false to disable rotating\n    this.enableRotate = true;\n    this.rotateSpeed = 1.0;\n\n    // Set to false to disable panning\n    this.enablePan = true;\n    this.panSpeed = 1.0;\n    this.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n    this.keyPanSpeed = 7.0; // pixels moved per arrow key push\n    this.zoomToCursor = false;\n\n    // Set to true to automatically rotate around the target\n    // If auto-rotate is enabled, you must call controls.update() in your animation loop\n    this.autoRotate = false;\n    this.autoRotateSpeed = 2.0; // 30 seconds per orbit when fps is 60\n\n    // The four arrow keys\n    this.keys = {\n      LEFT: 'ArrowLeft',\n      UP: 'ArrowUp',\n      RIGHT: 'ArrowRight',\n      BOTTOM: 'ArrowDown'\n    };\n\n    // Mouse buttons\n    this.mouseButtons = {\n      LEFT: MOUSE.ROTATE,\n      MIDDLE: MOUSE.DOLLY,\n      RIGHT: MOUSE.PAN\n    };\n\n    // Touch fingers\n    this.touches = {\n      ONE: TOUCH.ROTATE,\n      TWO: TOUCH.DOLLY_PAN\n    };\n\n    // for reset\n    this.target0 = this.target.clone();\n    this.position0 = this.object.position.clone();\n    this.zoom0 = this.object.zoom;\n\n    // the target DOM element for key events\n    this._domElementKeyEvents = null;\n\n    // internals\n\n    this._lastPosition = new Vector3();\n    this._lastQuaternion = new Quaternion();\n    this._lastTargetPosition = new Vector3();\n\n    // so camera.up is the orbit axis\n    this._quat = new Quaternion().setFromUnitVectors(object.up, new Vector3(0, 1, 0));\n    this._quatInverse = this._quat.clone().invert();\n\n    // current position in spherical coordinates\n    this._spherical = new Spherical();\n    this._sphericalDelta = new Spherical();\n    this._scale = 1;\n    this._panOffset = new Vector3();\n    this._rotateStart = new Vector2();\n    this._rotateEnd = new Vector2();\n    this._rotateDelta = new Vector2();\n    this._panStart = new Vector2();\n    this._panEnd = new Vector2();\n    this._panDelta = new Vector2();\n    this._dollyStart = new Vector2();\n    this._dollyEnd = new Vector2();\n    this._dollyDelta = new Vector2();\n    this._dollyDirection = new Vector3();\n    this._mouse = new Vector2();\n    this._performCursorZoom = false;\n    this._pointers = [];\n    this._pointerPositions = {};\n    this._controlActive = false;\n\n    // event listeners\n\n    this._onPointerMove = onPointerMove.bind(this);\n    this._onPointerDown = onPointerDown.bind(this);\n    this._onPointerUp = onPointerUp.bind(this);\n    this._onContextMenu = onContextMenu.bind(this);\n    this._onMouseWheel = onMouseWheel.bind(this);\n    this._onKeyDown = onKeyDown.bind(this);\n    this._onTouchStart = onTouchStart.bind(this);\n    this._onTouchMove = onTouchMove.bind(this);\n    this._onMouseDown = onMouseDown.bind(this);\n    this._onMouseMove = onMouseMove.bind(this);\n    this._interceptControlDown = interceptControlDown.bind(this);\n    this._interceptControlUp = interceptControlUp.bind(this);\n\n    //\n\n    if (this.domElement !== null) {\n      this.connect();\n    }\n    this.update();\n  }\n  connect() {\n    this.domElement.addEventListener('pointerdown', this._onPointerDown);\n    this.domElement.addEventListener('pointercancel', this._onPointerUp);\n    this.domElement.addEventListener('contextmenu', this._onContextMenu);\n    this.domElement.addEventListener('wheel', this._onMouseWheel, {\n      passive: false\n    });\n    const document = this.domElement.getRootNode(); // offscreen canvas compatibility\n    document.addEventListener('keydown', this._interceptControlDown, {\n      passive: true,\n      capture: true\n    });\n    this.domElement.style.touchAction = 'none'; // disable touch scroll\n  }\n  disconnect() {\n    this.domElement.removeEventListener('pointerdown', this._onPointerDown);\n    this.domElement.removeEventListener('pointermove', this._onPointerMove);\n    this.domElement.removeEventListener('pointerup', this._onPointerUp);\n    this.domElement.removeEventListener('pointercancel', this._onPointerUp);\n    this.domElement.removeEventListener('wheel', this._onMouseWheel);\n    this.domElement.removeEventListener('contextmenu', this._onContextMenu);\n    this.stopListenToKeyEvents();\n    const document = this.domElement.getRootNode(); // offscreen canvas compatibility\n    document.removeEventListener('keydown', this._interceptControlDown, {\n      capture: true\n    });\n    this.domElement.style.touchAction = 'auto';\n  }\n  dispose() {\n    this.disconnect();\n  }\n  getPolarAngle() {\n    return this._spherical.phi;\n  }\n  getAzimuthalAngle() {\n    return this._spherical.theta;\n  }\n  getDistance() {\n    return this.object.position.distanceTo(this.target);\n  }\n  listenToKeyEvents(domElement) {\n    domElement.addEventListener('keydown', this._onKeyDown);\n    this._domElementKeyEvents = domElement;\n  }\n  stopListenToKeyEvents() {\n    if (this._domElementKeyEvents !== null) {\n      this._domElementKeyEvents.removeEventListener('keydown', this._onKeyDown);\n      this._domElementKeyEvents = null;\n    }\n  }\n  saveState() {\n    this.target0.copy(this.target);\n    this.position0.copy(this.object.position);\n    this.zoom0 = this.object.zoom;\n  }\n  reset() {\n    this.target.copy(this.target0);\n    this.object.position.copy(this.position0);\n    this.object.zoom = this.zoom0;\n    this.object.updateProjectionMatrix();\n    this.dispatchEvent(_changeEvent);\n    this.update();\n    this.state = _STATE.NONE;\n  }\n  update(deltaTime = null) {\n    const position = this.object.position;\n    _v.copy(position).sub(this.target);\n\n    // rotate offset to \"y-axis-is-up\" space\n    _v.applyQuaternion(this._quat);\n\n    // angle from z-axis around y-axis\n    this._spherical.setFromVector3(_v);\n    if (this.autoRotate && this.state === _STATE.NONE) {\n      this._rotateLeft(this._getAutoRotationAngle(deltaTime));\n    }\n    if (this.enableDamping) {\n      this._spherical.theta += this._sphericalDelta.theta * this.dampingFactor;\n      this._spherical.phi += this._sphericalDelta.phi * this.dampingFactor;\n    } else {\n      this._spherical.theta += this._sphericalDelta.theta;\n      this._spherical.phi += this._sphericalDelta.phi;\n    }\n\n    // restrict theta to be between desired limits\n\n    let min = this.minAzimuthAngle;\n    let max = this.maxAzimuthAngle;\n    if (isFinite(min) && isFinite(max)) {\n      if (min < -Math.PI) min += _twoPI;else if (min > Math.PI) min -= _twoPI;\n      if (max < -Math.PI) max += _twoPI;else if (max > Math.PI) max -= _twoPI;\n      if (min <= max) {\n        this._spherical.theta = Math.max(min, Math.min(max, this._spherical.theta));\n      } else {\n        this._spherical.theta = this._spherical.theta > (min + max) / 2 ? Math.max(min, this._spherical.theta) : Math.min(max, this._spherical.theta);\n      }\n    }\n\n    // restrict phi to be between desired limits\n    this._spherical.phi = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, this._spherical.phi));\n    this._spherical.makeSafe();\n\n    // move target to panned location\n\n    if (this.enableDamping === true) {\n      this.target.addScaledVector(this._panOffset, this.dampingFactor);\n    } else {\n      this.target.add(this._panOffset);\n    }\n\n    // Limit the target distance from the cursor to create a sphere around the center of interest\n    this.target.sub(this.cursor);\n    this.target.clampLength(this.minTargetRadius, this.maxTargetRadius);\n    this.target.add(this.cursor);\n    let zoomChanged = false;\n    // adjust the camera position based on zoom only if we're not zooming to the cursor or if it's an ortho camera\n    // we adjust zoom later in these cases\n    if (this.zoomToCursor && this._performCursorZoom || this.object.isOrthographicCamera) {\n      this._spherical.radius = this._clampDistance(this._spherical.radius);\n    } else {\n      const prevRadius = this._spherical.radius;\n      this._spherical.radius = this._clampDistance(this._spherical.radius * this._scale);\n      zoomChanged = prevRadius != this._spherical.radius;\n    }\n    _v.setFromSpherical(this._spherical);\n\n    // rotate offset back to \"camera-up-vector-is-up\" space\n    _v.applyQuaternion(this._quatInverse);\n    position.copy(this.target).add(_v);\n    this.object.lookAt(this.target);\n    if (this.enableDamping === true) {\n      this._sphericalDelta.theta *= 1 - this.dampingFactor;\n      this._sphericalDelta.phi *= 1 - this.dampingFactor;\n      this._panOffset.multiplyScalar(1 - this.dampingFactor);\n    } else {\n      this._sphericalDelta.set(0, 0, 0);\n      this._panOffset.set(0, 0, 0);\n    }\n\n    // adjust camera position\n    if (this.zoomToCursor && this._performCursorZoom) {\n      let newRadius = null;\n      if (this.object.isPerspectiveCamera) {\n        // move the camera down the pointer ray\n        // this method avoids floating point error\n        const prevRadius = _v.length();\n        newRadius = this._clampDistance(prevRadius * this._scale);\n        const radiusDelta = prevRadius - newRadius;\n        this.object.position.addScaledVector(this._dollyDirection, radiusDelta);\n        this.object.updateMatrixWorld();\n        zoomChanged = !!radiusDelta;\n      } else if (this.object.isOrthographicCamera) {\n        // adjust the ortho camera position based on zoom changes\n        const mouseBefore = new Vector3(this._mouse.x, this._mouse.y, 0);\n        mouseBefore.unproject(this.object);\n        const prevZoom = this.object.zoom;\n        this.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom / this._scale));\n        this.object.updateProjectionMatrix();\n        zoomChanged = prevZoom !== this.object.zoom;\n        const mouseAfter = new Vector3(this._mouse.x, this._mouse.y, 0);\n        mouseAfter.unproject(this.object);\n        this.object.position.sub(mouseAfter).add(mouseBefore);\n        this.object.updateMatrixWorld();\n        newRadius = _v.length();\n      } else {\n        console.warn('WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled.');\n        this.zoomToCursor = false;\n      }\n\n      // handle the placement of the target\n      if (newRadius !== null) {\n        if (this.screenSpacePanning) {\n          // position the orbit target in front of the new camera position\n          this.target.set(0, 0, -1).transformDirection(this.object.matrix).multiplyScalar(newRadius).add(this.object.position);\n        } else {\n          // get the ray and translation plane to compute target\n          _ray.origin.copy(this.object.position);\n          _ray.direction.set(0, 0, -1).transformDirection(this.object.matrix);\n\n          // if the camera is 20 degrees above the horizon then don't adjust the focus target to avoid\n          // extremely large values\n          if (Math.abs(this.object.up.dot(_ray.direction)) < _TILT_LIMIT) {\n            this.object.lookAt(this.target);\n          } else {\n            _plane.setFromNormalAndCoplanarPoint(this.object.up, this.target);\n            _ray.intersectPlane(_plane, this.target);\n          }\n        }\n      }\n    } else if (this.object.isOrthographicCamera) {\n      const prevZoom = this.object.zoom;\n      this.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom / this._scale));\n      if (prevZoom !== this.object.zoom) {\n        this.object.updateProjectionMatrix();\n        zoomChanged = true;\n      }\n    }\n    this._scale = 1;\n    this._performCursorZoom = false;\n\n    // update condition is:\n    // min(camera displacement, camera rotation in radians)^2 > EPS\n    // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n    if (zoomChanged || this._lastPosition.distanceToSquared(this.object.position) > _EPS || 8 * (1 - this._lastQuaternion.dot(this.object.quaternion)) > _EPS || this._lastTargetPosition.distanceToSquared(this.target) > _EPS) {\n      this.dispatchEvent(_changeEvent);\n      this._lastPosition.copy(this.object.position);\n      this._lastQuaternion.copy(this.object.quaternion);\n      this._lastTargetPosition.copy(this.target);\n      return true;\n    }\n    return false;\n  }\n  _getAutoRotationAngle(deltaTime) {\n    if (deltaTime !== null) {\n      return _twoPI / 60 * this.autoRotateSpeed * deltaTime;\n    } else {\n      return _twoPI / 60 / 60 * this.autoRotateSpeed;\n    }\n  }\n  _getZoomScale(delta) {\n    const normalizedDelta = Math.abs(delta * 0.01);\n    return Math.pow(0.95, this.zoomSpeed * normalizedDelta);\n  }\n  _rotateLeft(angle) {\n    this._sphericalDelta.theta -= angle;\n  }\n  _rotateUp(angle) {\n    this._sphericalDelta.phi -= angle;\n  }\n  _panLeft(distance, objectMatrix) {\n    _v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\n    _v.multiplyScalar(-distance);\n    this._panOffset.add(_v);\n  }\n  _panUp(distance, objectMatrix) {\n    if (this.screenSpacePanning === true) {\n      _v.setFromMatrixColumn(objectMatrix, 1);\n    } else {\n      _v.setFromMatrixColumn(objectMatrix, 0);\n      _v.crossVectors(this.object.up, _v);\n    }\n    _v.multiplyScalar(distance);\n    this._panOffset.add(_v);\n  }\n\n  // deltaX and deltaY are in pixels; right and down are positive\n  _pan(deltaX, deltaY) {\n    const element = this.domElement;\n    if (this.object.isPerspectiveCamera) {\n      // perspective\n      const position = this.object.position;\n      _v.copy(position).sub(this.target);\n      let targetDistance = _v.length();\n\n      // half of the fov is center to top of screen\n      targetDistance *= Math.tan(this.object.fov / 2 * Math.PI / 180.0);\n\n      // we use only clientHeight here so aspect ratio does not distort speed\n      this._panLeft(2 * deltaX * targetDistance / element.clientHeight, this.object.matrix);\n      this._panUp(2 * deltaY * targetDistance / element.clientHeight, this.object.matrix);\n    } else if (this.object.isOrthographicCamera) {\n      // orthographic\n      this._panLeft(deltaX * (this.object.right - this.object.left) / this.object.zoom / element.clientWidth, this.object.matrix);\n      this._panUp(deltaY * (this.object.top - this.object.bottom) / this.object.zoom / element.clientHeight, this.object.matrix);\n    } else {\n      // camera neither orthographic nor perspective\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\n      this.enablePan = false;\n    }\n  }\n  _dollyOut(dollyScale) {\n    if (this.object.isPerspectiveCamera || this.object.isOrthographicCamera) {\n      this._scale /= dollyScale;\n    } else {\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n      this.enableZoom = false;\n    }\n  }\n  _dollyIn(dollyScale) {\n    if (this.object.isPerspectiveCamera || this.object.isOrthographicCamera) {\n      this._scale *= dollyScale;\n    } else {\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n      this.enableZoom = false;\n    }\n  }\n  _updateZoomParameters(x, y) {\n    if (!this.zoomToCursor) {\n      return;\n    }\n    this._performCursorZoom = true;\n    const rect = this.domElement.getBoundingClientRect();\n    const dx = x - rect.left;\n    const dy = y - rect.top;\n    const w = rect.width;\n    const h = rect.height;\n    this._mouse.x = dx / w * 2 - 1;\n    this._mouse.y = -(dy / h) * 2 + 1;\n    this._dollyDirection.set(this._mouse.x, this._mouse.y, 1).unproject(this.object).sub(this.object.position).normalize();\n  }\n  _clampDistance(dist) {\n    return Math.max(this.minDistance, Math.min(this.maxDistance, dist));\n  }\n\n  //\n  // event callbacks - update the object state\n  //\n\n  _handleMouseDownRotate(event) {\n    this._rotateStart.set(event.clientX, event.clientY);\n  }\n  _handleMouseDownDolly(event) {\n    this._updateZoomParameters(event.clientX, event.clientX);\n    this._dollyStart.set(event.clientX, event.clientY);\n  }\n  _handleMouseDownPan(event) {\n    this._panStart.set(event.clientX, event.clientY);\n  }\n  _handleMouseMoveRotate(event) {\n    this._rotateEnd.set(event.clientX, event.clientY);\n    this._rotateDelta.subVectors(this._rotateEnd, this._rotateStart).multiplyScalar(this.rotateSpeed);\n    const element = this.domElement;\n    this._rotateLeft(_twoPI * this._rotateDelta.x / element.clientHeight); // yes, height\n\n    this._rotateUp(_twoPI * this._rotateDelta.y / element.clientHeight);\n    this._rotateStart.copy(this._rotateEnd);\n    this.update();\n  }\n  _handleMouseMoveDolly(event) {\n    this._dollyEnd.set(event.clientX, event.clientY);\n    this._dollyDelta.subVectors(this._dollyEnd, this._dollyStart);\n    if (this._dollyDelta.y > 0) {\n      this._dollyOut(this._getZoomScale(this._dollyDelta.y));\n    } else if (this._dollyDelta.y < 0) {\n      this._dollyIn(this._getZoomScale(this._dollyDelta.y));\n    }\n    this._dollyStart.copy(this._dollyEnd);\n    this.update();\n  }\n  _handleMouseMovePan(event) {\n    this._panEnd.set(event.clientX, event.clientY);\n    this._panDelta.subVectors(this._panEnd, this._panStart).multiplyScalar(this.panSpeed);\n    this._pan(this._panDelta.x, this._panDelta.y);\n    this._panStart.copy(this._panEnd);\n    this.update();\n  }\n  _handleMouseWheel(event) {\n    this._updateZoomParameters(event.clientX, event.clientY);\n    if (event.deltaY < 0) {\n      this._dollyIn(this._getZoomScale(event.deltaY));\n    } else if (event.deltaY > 0) {\n      this._dollyOut(this._getZoomScale(event.deltaY));\n    }\n    this.update();\n  }\n  _handleKeyDown(event) {\n    let needsUpdate = false;\n    switch (event.code) {\n      case this.keys.UP:\n        if (event.ctrlKey || event.metaKey || event.shiftKey) {\n          this._rotateUp(_twoPI * this.rotateSpeed / this.domElement.clientHeight);\n        } else {\n          this._pan(0, this.keyPanSpeed);\n        }\n        needsUpdate = true;\n        break;\n      case this.keys.BOTTOM:\n        if (event.ctrlKey || event.metaKey || event.shiftKey) {\n          this._rotateUp(-_twoPI * this.rotateSpeed / this.domElement.clientHeight);\n        } else {\n          this._pan(0, -this.keyPanSpeed);\n        }\n        needsUpdate = true;\n        break;\n      case this.keys.LEFT:\n        if (event.ctrlKey || event.metaKey || event.shiftKey) {\n          this._rotateLeft(_twoPI * this.rotateSpeed / this.domElement.clientHeight);\n        } else {\n          this._pan(this.keyPanSpeed, 0);\n        }\n        needsUpdate = true;\n        break;\n      case this.keys.RIGHT:\n        if (event.ctrlKey || event.metaKey || event.shiftKey) {\n          this._rotateLeft(-_twoPI * this.rotateSpeed / this.domElement.clientHeight);\n        } else {\n          this._pan(-this.keyPanSpeed, 0);\n        }\n        needsUpdate = true;\n        break;\n    }\n    if (needsUpdate) {\n      // prevent the browser from scrolling on cursor keys\n      event.preventDefault();\n      this.update();\n    }\n  }\n  _handleTouchStartRotate(event) {\n    if (this._pointers.length === 1) {\n      this._rotateStart.set(event.pageX, event.pageY);\n    } else {\n      const position = this._getSecondPointerPosition(event);\n      const x = 0.5 * (event.pageX + position.x);\n      const y = 0.5 * (event.pageY + position.y);\n      this._rotateStart.set(x, y);\n    }\n  }\n  _handleTouchStartPan(event) {\n    if (this._pointers.length === 1) {\n      this._panStart.set(event.pageX, event.pageY);\n    } else {\n      const position = this._getSecondPointerPosition(event);\n      const x = 0.5 * (event.pageX + position.x);\n      const y = 0.5 * (event.pageY + position.y);\n      this._panStart.set(x, y);\n    }\n  }\n  _handleTouchStartDolly(event) {\n    const position = this._getSecondPointerPosition(event);\n    const dx = event.pageX - position.x;\n    const dy = event.pageY - position.y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    this._dollyStart.set(0, distance);\n  }\n  _handleTouchStartDollyPan(event) {\n    if (this.enableZoom) this._handleTouchStartDolly(event);\n    if (this.enablePan) this._handleTouchStartPan(event);\n  }\n  _handleTouchStartDollyRotate(event) {\n    if (this.enableZoom) this._handleTouchStartDolly(event);\n    if (this.enableRotate) this._handleTouchStartRotate(event);\n  }\n  _handleTouchMoveRotate(event) {\n    if (this._pointers.length == 1) {\n      this._rotateEnd.set(event.pageX, event.pageY);\n    } else {\n      const position = this._getSecondPointerPosition(event);\n      const x = 0.5 * (event.pageX + position.x);\n      const y = 0.5 * (event.pageY + position.y);\n      this._rotateEnd.set(x, y);\n    }\n    this._rotateDelta.subVectors(this._rotateEnd, this._rotateStart).multiplyScalar(this.rotateSpeed);\n    const element = this.domElement;\n    this._rotateLeft(_twoPI * this._rotateDelta.x / element.clientHeight); // yes, height\n\n    this._rotateUp(_twoPI * this._rotateDelta.y / element.clientHeight);\n    this._rotateStart.copy(this._rotateEnd);\n  }\n  _handleTouchMovePan(event) {\n    if (this._pointers.length === 1) {\n      this._panEnd.set(event.pageX, event.pageY);\n    } else {\n      const position = this._getSecondPointerPosition(event);\n      const x = 0.5 * (event.pageX + position.x);\n      const y = 0.5 * (event.pageY + position.y);\n      this._panEnd.set(x, y);\n    }\n    this._panDelta.subVectors(this._panEnd, this._panStart).multiplyScalar(this.panSpeed);\n    this._pan(this._panDelta.x, this._panDelta.y);\n    this._panStart.copy(this._panEnd);\n  }\n  _handleTouchMoveDolly(event) {\n    const position = this._getSecondPointerPosition(event);\n    const dx = event.pageX - position.x;\n    const dy = event.pageY - position.y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    this._dollyEnd.set(0, distance);\n    this._dollyDelta.set(0, Math.pow(this._dollyEnd.y / this._dollyStart.y, this.zoomSpeed));\n    this._dollyOut(this._dollyDelta.y);\n    this._dollyStart.copy(this._dollyEnd);\n    const centerX = (event.pageX + position.x) * 0.5;\n    const centerY = (event.pageY + position.y) * 0.5;\n    this._updateZoomParameters(centerX, centerY);\n  }\n  _handleTouchMoveDollyPan(event) {\n    if (this.enableZoom) this._handleTouchMoveDolly(event);\n    if (this.enablePan) this._handleTouchMovePan(event);\n  }\n  _handleTouchMoveDollyRotate(event) {\n    if (this.enableZoom) this._handleTouchMoveDolly(event);\n    if (this.enableRotate) this._handleTouchMoveRotate(event);\n  }\n\n  // pointers\n\n  _addPointer(event) {\n    this._pointers.push(event.pointerId);\n  }\n  _removePointer(event) {\n    delete this._pointerPositions[event.pointerId];\n    for (let i = 0; i < this._pointers.length; i++) {\n      if (this._pointers[i] == event.pointerId) {\n        this._pointers.splice(i, 1);\n        return;\n      }\n    }\n  }\n  _isTrackingPointer(event) {\n    for (let i = 0; i < this._pointers.length; i++) {\n      if (this._pointers[i] == event.pointerId) return true;\n    }\n    return false;\n  }\n  _trackPointer(event) {\n    let position = this._pointerPositions[event.pointerId];\n    if (position === undefined) {\n      position = new Vector2();\n      this._pointerPositions[event.pointerId] = position;\n    }\n    position.set(event.pageX, event.pageY);\n  }\n  _getSecondPointerPosition(event) {\n    const pointerId = event.pointerId === this._pointers[0] ? this._pointers[1] : this._pointers[0];\n    return this._pointerPositions[pointerId];\n  }\n\n  //\n\n  _customWheelEvent(event) {\n    const mode = event.deltaMode;\n\n    // minimal wheel event altered to meet delta-zoom demand\n    const newEvent = {\n      clientX: event.clientX,\n      clientY: event.clientY,\n      deltaY: event.deltaY\n    };\n    switch (mode) {\n      case 1:\n        // LINE_MODE\n        newEvent.deltaY *= 16;\n        break;\n      case 2:\n        // PAGE_MODE\n        newEvent.deltaY *= 100;\n        break;\n    }\n\n    // detect if event was triggered by pinching\n    if (event.ctrlKey && !this._controlActive) {\n      newEvent.deltaY *= 10;\n    }\n    return newEvent;\n  }\n}\nfunction onPointerDown(event) {\n  if (this.enabled === false) return;\n  if (this._pointers.length === 0) {\n    this.domElement.setPointerCapture(event.pointerId);\n    this.domElement.addEventListener('pointermove', this._onPointerMove);\n    this.domElement.addEventListener('pointerup', this._onPointerUp);\n  }\n\n  //\n\n  if (this._isTrackingPointer(event)) return;\n\n  //\n\n  this._addPointer(event);\n  if (event.pointerType === 'touch') {\n    this._onTouchStart(event);\n  } else {\n    this._onMouseDown(event);\n  }\n}\nfunction onPointerMove(event) {\n  if (this.enabled === false) return;\n  if (event.pointerType === 'touch') {\n    this._onTouchMove(event);\n  } else {\n    this._onMouseMove(event);\n  }\n}\nfunction onPointerUp(event) {\n  this._removePointer(event);\n  switch (this._pointers.length) {\n    case 0:\n      this.domElement.releasePointerCapture(event.pointerId);\n      this.domElement.removeEventListener('pointermove', this._onPointerMove);\n      this.domElement.removeEventListener('pointerup', this._onPointerUp);\n      this.dispatchEvent(_endEvent);\n      this.state = _STATE.NONE;\n      break;\n    case 1:\n      const pointerId = this._pointers[0];\n      const position = this._pointerPositions[pointerId];\n\n      // minimal placeholder event - allows state correction on pointer-up\n      this._onTouchStart({\n        pointerId: pointerId,\n        pageX: position.x,\n        pageY: position.y\n      });\n      break;\n  }\n}\nfunction onMouseDown(event) {\n  let mouseAction;\n  switch (event.button) {\n    case 0:\n      mouseAction = this.mouseButtons.LEFT;\n      break;\n    case 1:\n      mouseAction = this.mouseButtons.MIDDLE;\n      break;\n    case 2:\n      mouseAction = this.mouseButtons.RIGHT;\n      break;\n    default:\n      mouseAction = -1;\n  }\n  switch (mouseAction) {\n    case MOUSE.DOLLY:\n      if (this.enableZoom === false) return;\n      this._handleMouseDownDolly(event);\n      this.state = _STATE.DOLLY;\n      break;\n    case MOUSE.ROTATE:\n      if (event.ctrlKey || event.metaKey || event.shiftKey) {\n        if (this.enablePan === false) return;\n        this._handleMouseDownPan(event);\n        this.state = _STATE.PAN;\n      } else {\n        if (this.enableRotate === false) return;\n        this._handleMouseDownRotate(event);\n        this.state = _STATE.ROTATE;\n      }\n      break;\n    case MOUSE.PAN:\n      if (event.ctrlKey || event.metaKey || event.shiftKey) {\n        if (this.enableRotate === false) return;\n        this._handleMouseDownRotate(event);\n        this.state = _STATE.ROTATE;\n      } else {\n        if (this.enablePan === false) return;\n        this._handleMouseDownPan(event);\n        this.state = _STATE.PAN;\n      }\n      break;\n    default:\n      this.state = _STATE.NONE;\n  }\n  if (this.state !== _STATE.NONE) {\n    this.dispatchEvent(_startEvent);\n  }\n}\nfunction onMouseMove(event) {\n  switch (this.state) {\n    case _STATE.ROTATE:\n      if (this.enableRotate === false) return;\n      this._handleMouseMoveRotate(event);\n      break;\n    case _STATE.DOLLY:\n      if (this.enableZoom === false) return;\n      this._handleMouseMoveDolly(event);\n      break;\n    case _STATE.PAN:\n      if (this.enablePan === false) return;\n      this._handleMouseMovePan(event);\n      break;\n  }\n}\nfunction onMouseWheel(event) {\n  if (this.enabled === false || this.enableZoom === false || this.state !== _STATE.NONE) return;\n  event.preventDefault();\n  this.dispatchEvent(_startEvent);\n  this._handleMouseWheel(this._customWheelEvent(event));\n  this.dispatchEvent(_endEvent);\n}\nfunction onKeyDown(event) {\n  if (this.enabled === false || this.enablePan === false) return;\n  this._handleKeyDown(event);\n}\nfunction onTouchStart(event) {\n  this._trackPointer(event);\n  switch (this._pointers.length) {\n    case 1:\n      switch (this.touches.ONE) {\n        case TOUCH.ROTATE:\n          if (this.enableRotate === false) return;\n          this._handleTouchStartRotate(event);\n          this.state = _STATE.TOUCH_ROTATE;\n          break;\n        case TOUCH.PAN:\n          if (this.enablePan === false) return;\n          this._handleTouchStartPan(event);\n          this.state = _STATE.TOUCH_PAN;\n          break;\n        default:\n          this.state = _STATE.NONE;\n      }\n      break;\n    case 2:\n      switch (this.touches.TWO) {\n        case TOUCH.DOLLY_PAN:\n          if (this.enableZoom === false && this.enablePan === false) return;\n          this._handleTouchStartDollyPan(event);\n          this.state = _STATE.TOUCH_DOLLY_PAN;\n          break;\n        case TOUCH.DOLLY_ROTATE:\n          if (this.enableZoom === false && this.enableRotate === false) return;\n          this._handleTouchStartDollyRotate(event);\n          this.state = _STATE.TOUCH_DOLLY_ROTATE;\n          break;\n        default:\n          this.state = _STATE.NONE;\n      }\n      break;\n    default:\n      this.state = _STATE.NONE;\n  }\n  if (this.state !== _STATE.NONE) {\n    this.dispatchEvent(_startEvent);\n  }\n}\nfunction onTouchMove(event) {\n  this._trackPointer(event);\n  switch (this.state) {\n    case _STATE.TOUCH_ROTATE:\n      if (this.enableRotate === false) return;\n      this._handleTouchMoveRotate(event);\n      this.update();\n      break;\n    case _STATE.TOUCH_PAN:\n      if (this.enablePan === false) return;\n      this._handleTouchMovePan(event);\n      this.update();\n      break;\n    case _STATE.TOUCH_DOLLY_PAN:\n      if (this.enableZoom === false && this.enablePan === false) return;\n      this._handleTouchMoveDollyPan(event);\n      this.update();\n      break;\n    case _STATE.TOUCH_DOLLY_ROTATE:\n      if (this.enableZoom === false && this.enableRotate === false) return;\n      this._handleTouchMoveDollyRotate(event);\n      this.update();\n      break;\n    default:\n      this.state = _STATE.NONE;\n  }\n}\nfunction onContextMenu(event) {\n  if (this.enabled === false) return;\n  event.preventDefault();\n}\nfunction interceptControlDown(event) {\n  if (event.key === 'Control') {\n    this._controlActive = true;\n    const document = this.domElement.getRootNode(); // offscreen canvas compatibility\n\n    document.addEventListener('keyup', this._interceptControlUp, {\n      passive: true,\n      capture: true\n    });\n  }\n}\nfunction interceptControlUp(event) {\n  if (event.key === 'Control') {\n    this._controlActive = false;\n    const document = this.domElement.getRootNode(); // offscreen canvas compatibility\n\n    document.removeEventListener('keyup', this._interceptControlUp, {\n      passive: true,\n      capture: true\n    });\n  }\n}\nexport { OrbitControls };","map":{"version":3,"names":["Controls","MOUSE","Quaternion","Spherical","TOUCH","Vector2","Vector3","Plane","Ray","MathUtils","_changeEvent","type","_startEvent","_endEvent","_ray","_plane","_TILT_LIMIT","Math","cos","DEG2RAD","_v","_twoPI","PI","_STATE","NONE","ROTATE","DOLLY","PAN","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","_EPS","OrbitControls","constructor","object","domElement","state","enabled","target","cursor","minDistance","maxDistance","Infinity","minZoom","maxZoom","minTargetRadius","maxTargetRadius","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","zoomToCursor","autoRotate","autoRotateSpeed","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MIDDLE","touches","ONE","TWO","DOLLY_PAN","target0","clone","position0","position","zoom0","zoom","_domElementKeyEvents","_lastPosition","_lastQuaternion","_lastTargetPosition","_quat","setFromUnitVectors","up","_quatInverse","invert","_spherical","_sphericalDelta","_scale","_panOffset","_rotateStart","_rotateEnd","_rotateDelta","_panStart","_panEnd","_panDelta","_dollyStart","_dollyEnd","_dollyDelta","_dollyDirection","_mouse","_performCursorZoom","_pointers","_pointerPositions","_controlActive","_onPointerMove","onPointerMove","bind","_onPointerDown","onPointerDown","_onPointerUp","onPointerUp","_onContextMenu","onContextMenu","_onMouseWheel","onMouseWheel","_onKeyDown","onKeyDown","_onTouchStart","onTouchStart","_onTouchMove","onTouchMove","_onMouseDown","onMouseDown","_onMouseMove","onMouseMove","_interceptControlDown","interceptControlDown","_interceptControlUp","interceptControlUp","connect","update","addEventListener","passive","document","getRootNode","capture","style","touchAction","disconnect","removeEventListener","stopListenToKeyEvents","dispose","getPolarAngle","phi","getAzimuthalAngle","theta","getDistance","distanceTo","listenToKeyEvents","saveState","copy","reset","updateProjectionMatrix","dispatchEvent","deltaTime","sub","applyQuaternion","setFromVector3","_rotateLeft","_getAutoRotationAngle","min","max","isFinite","makeSafe","addScaledVector","add","clampLength","zoomChanged","isOrthographicCamera","radius","_clampDistance","prevRadius","setFromSpherical","lookAt","multiplyScalar","set","newRadius","isPerspectiveCamera","length","radiusDelta","updateMatrixWorld","mouseBefore","x","y","unproject","prevZoom","mouseAfter","console","warn","transformDirection","matrix","origin","direction","abs","dot","setFromNormalAndCoplanarPoint","intersectPlane","distanceToSquared","quaternion","_getZoomScale","delta","normalizedDelta","pow","angle","_rotateUp","_panLeft","distance","objectMatrix","setFromMatrixColumn","_panUp","crossVectors","_pan","deltaX","deltaY","element","targetDistance","tan","fov","clientHeight","right","left","clientWidth","top","bottom","_dollyOut","dollyScale","_dollyIn","_updateZoomParameters","rect","getBoundingClientRect","dx","dy","w","width","h","height","normalize","dist","_handleMouseDownRotate","event","clientX","clientY","_handleMouseDownDolly","_handleMouseDownPan","_handleMouseMoveRotate","subVectors","_handleMouseMoveDolly","_handleMouseMovePan","_handleMouseWheel","_handleKeyDown","needsUpdate","code","ctrlKey","metaKey","shiftKey","preventDefault","_handleTouchStartRotate","pageX","pageY","_getSecondPointerPosition","_handleTouchStartPan","_handleTouchStartDolly","sqrt","_handleTouchStartDollyPan","_handleTouchStartDollyRotate","_handleTouchMoveRotate","_handleTouchMovePan","_handleTouchMoveDolly","centerX","centerY","_handleTouchMoveDollyPan","_handleTouchMoveDollyRotate","_addPointer","push","pointerId","_removePointer","i","splice","_isTrackingPointer","_trackPointer","undefined","_customWheelEvent","mode","deltaMode","newEvent","setPointerCapture","pointerType","releasePointerCapture","mouseAction","button","DOLLY_ROTATE","key"],"sources":["/Users/vivianastaicu/Documents/GitHub/co27showcase/co27showcase/node_modules/three/examples/jsm/controls/OrbitControls.js"],"sourcesContent":["import {\n\tControls,\n\tMOUSE,\n\tQuaternion,\n\tSpherical,\n\tTOUCH,\n\tVector2,\n\tVector3,\n\tPlane,\n\tRay,\n\tMathUtils\n} from 'three';\n\n// OrbitControls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nconst _changeEvent = { type: 'change' };\nconst _startEvent = { type: 'start' };\nconst _endEvent = { type: 'end' };\nconst _ray = new Ray();\nconst _plane = new Plane();\nconst _TILT_LIMIT = Math.cos( 70 * MathUtils.DEG2RAD );\n\nconst _v = new Vector3();\nconst _twoPI = 2 * Math.PI;\n\nconst _STATE = {\n\tNONE: - 1,\n\tROTATE: 0,\n\tDOLLY: 1,\n\tPAN: 2,\n\tTOUCH_ROTATE: 3,\n\tTOUCH_PAN: 4,\n\tTOUCH_DOLLY_PAN: 5,\n\tTOUCH_DOLLY_ROTATE: 6\n};\nconst _EPS = 0.000001;\n\nclass OrbitControls extends Controls {\n\n\tconstructor( object, domElement = null ) {\n\n\t\tsuper( object, domElement );\n\n\t\tthis.state = _STATE.NONE;\n\n\t\t// Set to false to disable this control\n\t\tthis.enabled = true;\n\n\t\t// \"target\" sets the location of focus, where the object orbits around\n\t\tthis.target = new Vector3();\n\n\t\t// Sets the 3D cursor (similar to Blender), from which the maxTargetRadius takes effect\n\t\tthis.cursor = new Vector3();\n\n\t\t// How far you can dolly in and out ( PerspectiveCamera only )\n\t\tthis.minDistance = 0;\n\t\tthis.maxDistance = Infinity;\n\n\t\t// How far you can zoom in and out ( OrthographicCamera only )\n\t\tthis.minZoom = 0;\n\t\tthis.maxZoom = Infinity;\n\n\t\t// Limit camera target within a spherical area around the cursor\n\t\tthis.minTargetRadius = 0;\n\t\tthis.maxTargetRadius = Infinity;\n\n\t\t// How far you can orbit vertically, upper and lower limits.\n\t\t// Range is 0 to Math.PI radians.\n\t\tthis.minPolarAngle = 0; // radians\n\t\tthis.maxPolarAngle = Math.PI; // radians\n\n\t\t// How far you can orbit horizontally, upper and lower limits.\n\t\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n\t\tthis.minAzimuthAngle = - Infinity; // radians\n\t\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t\t// Set to true to enable damping (inertia)\n\t\t// If damping is enabled, you must call controls.update() in your animation loop\n\t\tthis.enableDamping = false;\n\t\tthis.dampingFactor = 0.05;\n\n\t\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t\t// Set to false to disable zooming\n\t\tthis.enableZoom = true;\n\t\tthis.zoomSpeed = 1.0;\n\n\t\t// Set to false to disable rotating\n\t\tthis.enableRotate = true;\n\t\tthis.rotateSpeed = 1.0;\n\n\t\t// Set to false to disable panning\n\t\tthis.enablePan = true;\n\t\tthis.panSpeed = 1.0;\n\t\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n\t\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\t\tthis.zoomToCursor = false;\n\n\t\t// Set to true to automatically rotate around the target\n\t\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\t\tthis.autoRotate = false;\n\t\tthis.autoRotateSpeed = 2.0; // 30 seconds per orbit when fps is 60\n\n\t\t// The four arrow keys\n\t\tthis.keys = { LEFT: 'ArrowLeft', UP: 'ArrowUp', RIGHT: 'ArrowRight', BOTTOM: 'ArrowDown' };\n\n\t\t// Mouse buttons\n\t\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t\t// Touch fingers\n\t\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n\t\t// for reset\n\t\tthis.target0 = this.target.clone();\n\t\tthis.position0 = this.object.position.clone();\n\t\tthis.zoom0 = this.object.zoom;\n\n\t\t// the target DOM element for key events\n\t\tthis._domElementKeyEvents = null;\n\n\t\t// internals\n\n\t\tthis._lastPosition = new Vector3();\n\t\tthis._lastQuaternion = new Quaternion();\n\t\tthis._lastTargetPosition = new Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tthis._quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\n\t\tthis._quatInverse = this._quat.clone().invert();\n\n\t\t// current position in spherical coordinates\n\t\tthis._spherical = new Spherical();\n\t\tthis._sphericalDelta = new Spherical();\n\n\t\tthis._scale = 1;\n\t\tthis._panOffset = new Vector3();\n\n\t\tthis._rotateStart = new Vector2();\n\t\tthis._rotateEnd = new Vector2();\n\t\tthis._rotateDelta = new Vector2();\n\n\t\tthis._panStart = new Vector2();\n\t\tthis._panEnd = new Vector2();\n\t\tthis._panDelta = new Vector2();\n\n\t\tthis._dollyStart = new Vector2();\n\t\tthis._dollyEnd = new Vector2();\n\t\tthis._dollyDelta = new Vector2();\n\n\t\tthis._dollyDirection = new Vector3();\n\t\tthis._mouse = new Vector2();\n\t\tthis._performCursorZoom = false;\n\n\t\tthis._pointers = [];\n\t\tthis._pointerPositions = {};\n\n\t\tthis._controlActive = false;\n\n\t\t// event listeners\n\n\t\tthis._onPointerMove = onPointerMove.bind( this );\n\t\tthis._onPointerDown = onPointerDown.bind( this );\n\t\tthis._onPointerUp = onPointerUp.bind( this );\n\t\tthis._onContextMenu = onContextMenu.bind( this );\n\t\tthis._onMouseWheel = onMouseWheel.bind( this );\n\t\tthis._onKeyDown = onKeyDown.bind( this );\n\n\t\tthis._onTouchStart = onTouchStart.bind( this );\n\t\tthis._onTouchMove = onTouchMove.bind( this );\n\n\t\tthis._onMouseDown = onMouseDown.bind( this );\n\t\tthis._onMouseMove = onMouseMove.bind( this );\n\n\t\tthis._interceptControlDown = interceptControlDown.bind( this );\n\t\tthis._interceptControlUp = interceptControlUp.bind( this );\n\n\t\t//\n\n\t\tif ( this.domElement !== null ) {\n\n\t\t\tthis.connect();\n\n\t\t}\n\n\t\tthis.update();\n\n\t}\n\n\tconnect() {\n\n\t\tthis.domElement.addEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.addEventListener( 'pointercancel', this._onPointerUp );\n\n\t\tthis.domElement.addEventListener( 'contextmenu', this._onContextMenu );\n\t\tthis.domElement.addEventListener( 'wheel', this._onMouseWheel, { passive: false } );\n\n\t\tconst document = this.domElement.getRootNode(); // offscreen canvas compatibility\n\t\tdocument.addEventListener( 'keydown', this._interceptControlDown, { passive: true, capture: true } );\n\n\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\n\n\t}\n\n\tdisconnect() {\n\n\t\tthis.domElement.removeEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.removeEventListener( 'pointerup', this._onPointerUp );\n\t\tthis.domElement.removeEventListener( 'pointercancel', this._onPointerUp );\n\n\t\tthis.domElement.removeEventListener( 'wheel', this._onMouseWheel );\n\t\tthis.domElement.removeEventListener( 'contextmenu', this._onContextMenu );\n\n\t\tthis.stopListenToKeyEvents();\n\n\t\tconst document = this.domElement.getRootNode(); // offscreen canvas compatibility\n\t\tdocument.removeEventListener( 'keydown', this._interceptControlDown, { capture: true } );\n\n\t\tthis.domElement.style.touchAction = 'auto';\n\n\t}\n\n\tdispose() {\n\n\t\tthis.disconnect();\n\n\t}\n\n\tgetPolarAngle() {\n\n\t\treturn this._spherical.phi;\n\n\t}\n\n\tgetAzimuthalAngle() {\n\n\t\treturn this._spherical.theta;\n\n\t}\n\n\tgetDistance() {\n\n\t\treturn this.object.position.distanceTo( this.target );\n\n\t}\n\n\tlistenToKeyEvents( domElement ) {\n\n\t\tdomElement.addEventListener( 'keydown', this._onKeyDown );\n\t\tthis._domElementKeyEvents = domElement;\n\n\t}\n\n\tstopListenToKeyEvents() {\n\n\t\tif ( this._domElementKeyEvents !== null ) {\n\n\t\t\tthis._domElementKeyEvents.removeEventListener( 'keydown', this._onKeyDown );\n\t\t\tthis._domElementKeyEvents = null;\n\n\t\t}\n\n\t}\n\n\tsaveState() {\n\n\t\tthis.target0.copy( this.target );\n\t\tthis.position0.copy( this.object.position );\n\t\tthis.zoom0 = this.object.zoom;\n\n\t}\n\n\treset() {\n\n\t\tthis.target.copy( this.target0 );\n\t\tthis.object.position.copy( this.position0 );\n\t\tthis.object.zoom = this.zoom0;\n\n\t\tthis.object.updateProjectionMatrix();\n\t\tthis.dispatchEvent( _changeEvent );\n\n\t\tthis.update();\n\n\t\tthis.state = _STATE.NONE;\n\n\t}\n\n\tupdate( deltaTime = null ) {\n\n\t\tconst position = this.object.position;\n\n\t\t_v.copy( position ).sub( this.target );\n\n\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t_v.applyQuaternion( this._quat );\n\n\t\t// angle from z-axis around y-axis\n\t\tthis._spherical.setFromVector3( _v );\n\n\t\tif ( this.autoRotate && this.state === _STATE.NONE ) {\n\n\t\t\tthis._rotateLeft( this._getAutoRotationAngle( deltaTime ) );\n\n\t\t}\n\n\t\tif ( this.enableDamping ) {\n\n\t\t\tthis._spherical.theta += this._sphericalDelta.theta * this.dampingFactor;\n\t\t\tthis._spherical.phi += this._sphericalDelta.phi * this.dampingFactor;\n\n\t\t} else {\n\n\t\t\tthis._spherical.theta += this._sphericalDelta.theta;\n\t\t\tthis._spherical.phi += this._sphericalDelta.phi;\n\n\t\t}\n\n\t\t// restrict theta to be between desired limits\n\n\t\tlet min = this.minAzimuthAngle;\n\t\tlet max = this.maxAzimuthAngle;\n\n\t\tif ( isFinite( min ) && isFinite( max ) ) {\n\n\t\t\tif ( min < - Math.PI ) min += _twoPI; else if ( min > Math.PI ) min -= _twoPI;\n\n\t\t\tif ( max < - Math.PI ) max += _twoPI; else if ( max > Math.PI ) max -= _twoPI;\n\n\t\t\tif ( min <= max ) {\n\n\t\t\t\tthis._spherical.theta = Math.max( min, Math.min( max, this._spherical.theta ) );\n\n\t\t\t} else {\n\n\t\t\t\tthis._spherical.theta = ( this._spherical.theta > ( min + max ) / 2 ) ?\n\t\t\t\t\tMath.max( min, this._spherical.theta ) :\n\t\t\t\t\tMath.min( max, this._spherical.theta );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restrict phi to be between desired limits\n\t\tthis._spherical.phi = Math.max( this.minPolarAngle, Math.min( this.maxPolarAngle, this._spherical.phi ) );\n\n\t\tthis._spherical.makeSafe();\n\n\n\t\t// move target to panned location\n\n\t\tif ( this.enableDamping === true ) {\n\n\t\t\tthis.target.addScaledVector( this._panOffset, this.dampingFactor );\n\n\t\t} else {\n\n\t\t\tthis.target.add( this._panOffset );\n\n\t\t}\n\n\t\t// Limit the target distance from the cursor to create a sphere around the center of interest\n\t\tthis.target.sub( this.cursor );\n\t\tthis.target.clampLength( this.minTargetRadius, this.maxTargetRadius );\n\t\tthis.target.add( this.cursor );\n\n\t\tlet zoomChanged = false;\n\t\t// adjust the camera position based on zoom only if we're not zooming to the cursor or if it's an ortho camera\n\t\t// we adjust zoom later in these cases\n\t\tif ( this.zoomToCursor && this._performCursorZoom || this.object.isOrthographicCamera ) {\n\n\t\t\tthis._spherical.radius = this._clampDistance( this._spherical.radius );\n\n\t\t} else {\n\n\t\t\tconst prevRadius = this._spherical.radius;\n\t\t\tthis._spherical.radius = this._clampDistance( this._spherical.radius * this._scale );\n\t\t\tzoomChanged = prevRadius != this._spherical.radius;\n\n\t\t}\n\n\t\t_v.setFromSpherical( this._spherical );\n\n\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t_v.applyQuaternion( this._quatInverse );\n\n\t\tposition.copy( this.target ).add( _v );\n\n\t\tthis.object.lookAt( this.target );\n\n\t\tif ( this.enableDamping === true ) {\n\n\t\t\tthis._sphericalDelta.theta *= ( 1 - this.dampingFactor );\n\t\t\tthis._sphericalDelta.phi *= ( 1 - this.dampingFactor );\n\n\t\t\tthis._panOffset.multiplyScalar( 1 - this.dampingFactor );\n\n\t\t} else {\n\n\t\t\tthis._sphericalDelta.set( 0, 0, 0 );\n\n\t\t\tthis._panOffset.set( 0, 0, 0 );\n\n\t\t}\n\n\t\t// adjust camera position\n\t\tif ( this.zoomToCursor && this._performCursorZoom ) {\n\n\t\t\tlet newRadius = null;\n\t\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\t\t// move the camera down the pointer ray\n\t\t\t\t// this method avoids floating point error\n\t\t\t\tconst prevRadius = _v.length();\n\t\t\t\tnewRadius = this._clampDistance( prevRadius * this._scale );\n\n\t\t\t\tconst radiusDelta = prevRadius - newRadius;\n\t\t\t\tthis.object.position.addScaledVector( this._dollyDirection, radiusDelta );\n\t\t\t\tthis.object.updateMatrixWorld();\n\n\t\t\t\tzoomChanged = !! radiusDelta;\n\n\t\t\t} else if ( this.object.isOrthographicCamera ) {\n\n\t\t\t\t// adjust the ortho camera position based on zoom changes\n\t\t\t\tconst mouseBefore = new Vector3( this._mouse.x, this._mouse.y, 0 );\n\t\t\t\tmouseBefore.unproject( this.object );\n\n\t\t\t\tconst prevZoom = this.object.zoom;\n\t\t\t\tthis.object.zoom = Math.max( this.minZoom, Math.min( this.maxZoom, this.object.zoom / this._scale ) );\n\t\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t\t\tzoomChanged = prevZoom !== this.object.zoom;\n\n\t\t\t\tconst mouseAfter = new Vector3( this._mouse.x, this._mouse.y, 0 );\n\t\t\t\tmouseAfter.unproject( this.object );\n\n\t\t\t\tthis.object.position.sub( mouseAfter ).add( mouseBefore );\n\t\t\t\tthis.object.updateMatrixWorld();\n\n\t\t\t\tnewRadius = _v.length();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled.' );\n\t\t\t\tthis.zoomToCursor = false;\n\n\t\t\t}\n\n\t\t\t// handle the placement of the target\n\t\t\tif ( newRadius !== null ) {\n\n\t\t\t\tif ( this.screenSpacePanning ) {\n\n\t\t\t\t\t// position the orbit target in front of the new camera position\n\t\t\t\t\tthis.target.set( 0, 0, - 1 )\n\t\t\t\t\t\t.transformDirection( this.object.matrix )\n\t\t\t\t\t\t.multiplyScalar( newRadius )\n\t\t\t\t\t\t.add( this.object.position );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// get the ray and translation plane to compute target\n\t\t\t\t\t_ray.origin.copy( this.object.position );\n\t\t\t\t\t_ray.direction.set( 0, 0, - 1 ).transformDirection( this.object.matrix );\n\n\t\t\t\t\t// if the camera is 20 degrees above the horizon then don't adjust the focus target to avoid\n\t\t\t\t\t// extremely large values\n\t\t\t\t\tif ( Math.abs( this.object.up.dot( _ray.direction ) ) < _TILT_LIMIT ) {\n\n\t\t\t\t\t\tthis.object.lookAt( this.target );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t_plane.setFromNormalAndCoplanarPoint( this.object.up, this.target );\n\t\t\t\t\t\t_ray.intersectPlane( _plane, this.target );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( this.object.isOrthographicCamera ) {\n\n\t\t\tconst prevZoom = this.object.zoom;\n\t\t\tthis.object.zoom = Math.max( this.minZoom, Math.min( this.maxZoom, this.object.zoom / this._scale ) );\n\n\t\t\tif ( prevZoom !== this.object.zoom ) {\n\n\t\t\t\tthis.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._scale = 1;\n\t\tthis._performCursorZoom = false;\n\n\t\t// update condition is:\n\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\tif ( zoomChanged ||\n\t\t\tthis._lastPosition.distanceToSquared( this.object.position ) > _EPS ||\n\t\t\t8 * ( 1 - this._lastQuaternion.dot( this.object.quaternion ) ) > _EPS ||\n\t\t\tthis._lastTargetPosition.distanceToSquared( this.target ) > _EPS ) {\n\n\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\tthis._lastPosition.copy( this.object.position );\n\t\t\tthis._lastQuaternion.copy( this.object.quaternion );\n\t\t\tthis._lastTargetPosition.copy( this.target );\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\t_getAutoRotationAngle( deltaTime ) {\n\n\t\tif ( deltaTime !== null ) {\n\n\t\t\treturn ( _twoPI / 60 * this.autoRotateSpeed ) * deltaTime;\n\n\t\t} else {\n\n\t\t\treturn _twoPI / 60 / 60 * this.autoRotateSpeed;\n\n\t\t}\n\n\t}\n\n\t_getZoomScale( delta ) {\n\n\t\tconst normalizedDelta = Math.abs( delta * 0.01 );\n\t\treturn Math.pow( 0.95, this.zoomSpeed * normalizedDelta );\n\n\t}\n\n\t_rotateLeft( angle ) {\n\n\t\tthis._sphericalDelta.theta -= angle;\n\n\t}\n\n\t_rotateUp( angle ) {\n\n\t\tthis._sphericalDelta.phi -= angle;\n\n\t}\n\n\t_panLeft( distance, objectMatrix ) {\n\n\t\t_v.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t_v.multiplyScalar( - distance );\n\n\t\tthis._panOffset.add( _v );\n\n\t}\n\n\t_panUp( distance, objectMatrix ) {\n\n\t\tif ( this.screenSpacePanning === true ) {\n\n\t\t\t_v.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t} else {\n\n\t\t\t_v.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t_v.crossVectors( this.object.up, _v );\n\n\t\t}\n\n\t\t_v.multiplyScalar( distance );\n\n\t\tthis._panOffset.add( _v );\n\n\t}\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\t_pan( deltaX, deltaY ) {\n\n\t\tconst element = this.domElement;\n\n\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\t// perspective\n\t\t\tconst position = this.object.position;\n\t\t\t_v.copy( position ).sub( this.target );\n\t\t\tlet targetDistance = _v.length();\n\n\t\t\t// half of the fov is center to top of screen\n\t\t\ttargetDistance *= Math.tan( ( this.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\tthis._panLeft( 2 * deltaX * targetDistance / element.clientHeight, this.object.matrix );\n\t\t\tthis._panUp( 2 * deltaY * targetDistance / element.clientHeight, this.object.matrix );\n\n\t\t} else if ( this.object.isOrthographicCamera ) {\n\n\t\t\t// orthographic\n\t\t\tthis._panLeft( deltaX * ( this.object.right - this.object.left ) / this.object.zoom / element.clientWidth, this.object.matrix );\n\t\t\tthis._panUp( deltaY * ( this.object.top - this.object.bottom ) / this.object.zoom / element.clientHeight, this.object.matrix );\n\n\t\t} else {\n\n\t\t\t// camera neither orthographic nor perspective\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\tthis.enablePan = false;\n\n\t\t}\n\n\t}\n\n\t_dollyOut( dollyScale ) {\n\n\t\tif ( this.object.isPerspectiveCamera || this.object.isOrthographicCamera ) {\n\n\t\t\tthis._scale /= dollyScale;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tthis.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t_dollyIn( dollyScale ) {\n\n\t\tif ( this.object.isPerspectiveCamera || this.object.isOrthographicCamera ) {\n\n\t\t\tthis._scale *= dollyScale;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tthis.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t_updateZoomParameters( x, y ) {\n\n\t\tif ( ! this.zoomToCursor ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._performCursorZoom = true;\n\n\t\tconst rect = this.domElement.getBoundingClientRect();\n\t\tconst dx = x - rect.left;\n\t\tconst dy = y - rect.top;\n\t\tconst w = rect.width;\n\t\tconst h = rect.height;\n\n\t\tthis._mouse.x = ( dx / w ) * 2 - 1;\n\t\tthis._mouse.y = - ( dy / h ) * 2 + 1;\n\n\t\tthis._dollyDirection.set( this._mouse.x, this._mouse.y, 1 ).unproject( this.object ).sub( this.object.position ).normalize();\n\n\t}\n\n\t_clampDistance( dist ) {\n\n\t\treturn Math.max( this.minDistance, Math.min( this.maxDistance, dist ) );\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\t_handleMouseDownRotate( event ) {\n\n\t\tthis._rotateStart.set( event.clientX, event.clientY );\n\n\t}\n\n\t_handleMouseDownDolly( event ) {\n\n\t\tthis._updateZoomParameters( event.clientX, event.clientX );\n\t\tthis._dollyStart.set( event.clientX, event.clientY );\n\n\t}\n\n\t_handleMouseDownPan( event ) {\n\n\t\tthis._panStart.set( event.clientX, event.clientY );\n\n\t}\n\n\t_handleMouseMoveRotate( event ) {\n\n\t\tthis._rotateEnd.set( event.clientX, event.clientY );\n\n\t\tthis._rotateDelta.subVectors( this._rotateEnd, this._rotateStart ).multiplyScalar( this.rotateSpeed );\n\n\t\tconst element = this.domElement;\n\n\t\tthis._rotateLeft( _twoPI * this._rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\tthis._rotateUp( _twoPI * this._rotateDelta.y / element.clientHeight );\n\n\t\tthis._rotateStart.copy( this._rotateEnd );\n\n\t\tthis.update();\n\n\t}\n\n\t_handleMouseMoveDolly( event ) {\n\n\t\tthis._dollyEnd.set( event.clientX, event.clientY );\n\n\t\tthis._dollyDelta.subVectors( this._dollyEnd, this._dollyStart );\n\n\t\tif ( this._dollyDelta.y > 0 ) {\n\n\t\t\tthis._dollyOut( this._getZoomScale( this._dollyDelta.y ) );\n\n\t\t} else if ( this._dollyDelta.y < 0 ) {\n\n\t\t\tthis._dollyIn( this._getZoomScale( this._dollyDelta.y ) );\n\n\t\t}\n\n\t\tthis._dollyStart.copy( this._dollyEnd );\n\n\t\tthis.update();\n\n\t}\n\n\t_handleMouseMovePan( event ) {\n\n\t\tthis._panEnd.set( event.clientX, event.clientY );\n\n\t\tthis._panDelta.subVectors( this._panEnd, this._panStart ).multiplyScalar( this.panSpeed );\n\n\t\tthis._pan( this._panDelta.x, this._panDelta.y );\n\n\t\tthis._panStart.copy( this._panEnd );\n\n\t\tthis.update();\n\n\t}\n\n\t_handleMouseWheel( event ) {\n\n\t\tthis._updateZoomParameters( event.clientX, event.clientY );\n\n\t\tif ( event.deltaY < 0 ) {\n\n\t\t\tthis._dollyIn( this._getZoomScale( event.deltaY ) );\n\n\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\tthis._dollyOut( this._getZoomScale( event.deltaY ) );\n\n\t\t}\n\n\t\tthis.update();\n\n\t}\n\n\t_handleKeyDown( event ) {\n\n\t\tlet needsUpdate = false;\n\n\t\tswitch ( event.code ) {\n\n\t\t\tcase this.keys.UP:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tthis._rotateUp( _twoPI * this.rotateSpeed / this.domElement.clientHeight );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._pan( 0, this.keyPanSpeed );\n\n\t\t\t\t}\n\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase this.keys.BOTTOM:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tthis._rotateUp( - _twoPI * this.rotateSpeed / this.domElement.clientHeight );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._pan( 0, - this.keyPanSpeed );\n\n\t\t\t\t}\n\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase this.keys.LEFT:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tthis._rotateLeft( _twoPI * this.rotateSpeed / this.domElement.clientHeight );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._pan( this.keyPanSpeed, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase this.keys.RIGHT:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tthis._rotateLeft( - _twoPI * this.rotateSpeed / this.domElement.clientHeight );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._pan( - this.keyPanSpeed, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( needsUpdate ) {\n\n\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\tevent.preventDefault();\n\n\t\t\tthis.update();\n\n\t\t}\n\n\n\t}\n\n\t_handleTouchStartRotate( event ) {\n\n\t\tif ( this._pointers.length === 1 ) {\n\n\t\t\tthis._rotateStart.set( event.pageX, event.pageY );\n\n\t\t} else {\n\n\t\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\tthis._rotateStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\t_handleTouchStartPan( event ) {\n\n\t\tif ( this._pointers.length === 1 ) {\n\n\t\t\tthis._panStart.set( event.pageX, event.pageY );\n\n\t\t} else {\n\n\t\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\tthis._panStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\t_handleTouchStartDolly( event ) {\n\n\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\tconst dx = event.pageX - position.x;\n\t\tconst dy = event.pageY - position.y;\n\n\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tthis._dollyStart.set( 0, distance );\n\n\t}\n\n\t_handleTouchStartDollyPan( event ) {\n\n\t\tif ( this.enableZoom ) this._handleTouchStartDolly( event );\n\n\t\tif ( this.enablePan ) this._handleTouchStartPan( event );\n\n\t}\n\n\t_handleTouchStartDollyRotate( event ) {\n\n\t\tif ( this.enableZoom ) this._handleTouchStartDolly( event );\n\n\t\tif ( this.enableRotate ) this._handleTouchStartRotate( event );\n\n\t}\n\n\t_handleTouchMoveRotate( event ) {\n\n\t\tif ( this._pointers.length == 1 ) {\n\n\t\t\tthis._rotateEnd.set( event.pageX, event.pageY );\n\n\t\t} else {\n\n\t\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\tthis._rotateEnd.set( x, y );\n\n\t\t}\n\n\t\tthis._rotateDelta.subVectors( this._rotateEnd, this._rotateStart ).multiplyScalar( this.rotateSpeed );\n\n\t\tconst element = this.domElement;\n\n\t\tthis._rotateLeft( _twoPI * this._rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\tthis._rotateUp( _twoPI * this._rotateDelta.y / element.clientHeight );\n\n\t\tthis._rotateStart.copy( this._rotateEnd );\n\n\t}\n\n\t_handleTouchMovePan( event ) {\n\n\t\tif ( this._pointers.length === 1 ) {\n\n\t\t\tthis._panEnd.set( event.pageX, event.pageY );\n\n\t\t} else {\n\n\t\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\tthis._panEnd.set( x, y );\n\n\t\t}\n\n\t\tthis._panDelta.subVectors( this._panEnd, this._panStart ).multiplyScalar( this.panSpeed );\n\n\t\tthis._pan( this._panDelta.x, this._panDelta.y );\n\n\t\tthis._panStart.copy( this._panEnd );\n\n\t}\n\n\t_handleTouchMoveDolly( event ) {\n\n\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\tconst dx = event.pageX - position.x;\n\t\tconst dy = event.pageY - position.y;\n\n\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tthis._dollyEnd.set( 0, distance );\n\n\t\tthis._dollyDelta.set( 0, Math.pow( this._dollyEnd.y / this._dollyStart.y, this.zoomSpeed ) );\n\n\t\tthis._dollyOut( this._dollyDelta.y );\n\n\t\tthis._dollyStart.copy( this._dollyEnd );\n\n\t\tconst centerX = ( event.pageX + position.x ) * 0.5;\n\t\tconst centerY = ( event.pageY + position.y ) * 0.5;\n\n\t\tthis._updateZoomParameters( centerX, centerY );\n\n\t}\n\n\t_handleTouchMoveDollyPan( event ) {\n\n\t\tif ( this.enableZoom ) this._handleTouchMoveDolly( event );\n\n\t\tif ( this.enablePan ) this._handleTouchMovePan( event );\n\n\t}\n\n\t_handleTouchMoveDollyRotate( event ) {\n\n\t\tif ( this.enableZoom ) this._handleTouchMoveDolly( event );\n\n\t\tif ( this.enableRotate ) this._handleTouchMoveRotate( event );\n\n\t}\n\n\t// pointers\n\n\t_addPointer( event ) {\n\n\t\tthis._pointers.push( event.pointerId );\n\n\t}\n\n\t_removePointer( event ) {\n\n\t\tdelete this._pointerPositions[ event.pointerId ];\n\n\t\tfor ( let i = 0; i < this._pointers.length; i ++ ) {\n\n\t\t\tif ( this._pointers[ i ] == event.pointerId ) {\n\n\t\t\t\tthis._pointers.splice( i, 1 );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_isTrackingPointer( event ) {\n\n\t\tfor ( let i = 0; i < this._pointers.length; i ++ ) {\n\n\t\t\tif ( this._pointers[ i ] == event.pointerId ) return true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\t_trackPointer( event ) {\n\n\t\tlet position = this._pointerPositions[ event.pointerId ];\n\n\t\tif ( position === undefined ) {\n\n\t\t\tposition = new Vector2();\n\t\t\tthis._pointerPositions[ event.pointerId ] = position;\n\n\t\t}\n\n\t\tposition.set( event.pageX, event.pageY );\n\n\t}\n\n\t_getSecondPointerPosition( event ) {\n\n\t\tconst pointerId = ( event.pointerId === this._pointers[ 0 ] ) ? this._pointers[ 1 ] : this._pointers[ 0 ];\n\n\t\treturn this._pointerPositions[ pointerId ];\n\n\t}\n\n\t//\n\n\t_customWheelEvent( event ) {\n\n\t\tconst mode = event.deltaMode;\n\n\t\t// minimal wheel event altered to meet delta-zoom demand\n\t\tconst newEvent = {\n\t\t\tclientX: event.clientX,\n\t\t\tclientY: event.clientY,\n\t\t\tdeltaY: event.deltaY,\n\t\t};\n\n\t\tswitch ( mode ) {\n\n\t\t\tcase 1: // LINE_MODE\n\t\t\t\tnewEvent.deltaY *= 16;\n\t\t\t\tbreak;\n\n\t\t\tcase 2: // PAGE_MODE\n\t\t\t\tnewEvent.deltaY *= 100;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t// detect if event was triggered by pinching\n\t\tif ( event.ctrlKey && ! this._controlActive ) {\n\n\t\t\tnewEvent.deltaY *= 10;\n\n\t\t}\n\n\t\treturn newEvent;\n\n\t}\n\n}\n\nfunction onPointerDown( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( this._pointers.length === 0 ) {\n\n\t\tthis.domElement.setPointerCapture( event.pointerId );\n\n\t\tthis.domElement.addEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.addEventListener( 'pointerup', this._onPointerUp );\n\n\t}\n\n\t//\n\n\tif ( this._isTrackingPointer( event ) ) return;\n\n\t//\n\n\tthis._addPointer( event );\n\n\tif ( event.pointerType === 'touch' ) {\n\n\t\tthis._onTouchStart( event );\n\n\t} else {\n\n\t\tthis._onMouseDown( event );\n\n\t}\n\n}\n\nfunction onPointerMove( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( event.pointerType === 'touch' ) {\n\n\t\tthis._onTouchMove( event );\n\n\t} else {\n\n\t\tthis._onMouseMove( event );\n\n\t}\n\n}\n\nfunction onPointerUp( event ) {\n\n\tthis._removePointer( event );\n\n\tswitch ( this._pointers.length ) {\n\n\t\tcase 0:\n\n\t\t\tthis.domElement.releasePointerCapture( event.pointerId );\n\n\t\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\n\t\t\tthis.domElement.removeEventListener( 'pointerup', this._onPointerUp );\n\n\t\t\tthis.dispatchEvent( _endEvent );\n\n\t\t\tthis.state = _STATE.NONE;\n\n\t\t\tbreak;\n\n\t\tcase 1:\n\n\t\t\tconst pointerId = this._pointers[ 0 ];\n\t\t\tconst position = this._pointerPositions[ pointerId ];\n\n\t\t\t// minimal placeholder event - allows state correction on pointer-up\n\t\t\tthis._onTouchStart( { pointerId: pointerId, pageX: position.x, pageY: position.y } );\n\n\t\t\tbreak;\n\n\t}\n\n}\n\nfunction onMouseDown( event ) {\n\n\tlet mouseAction;\n\n\tswitch ( event.button ) {\n\n\t\tcase 0:\n\n\t\t\tmouseAction = this.mouseButtons.LEFT;\n\t\t\tbreak;\n\n\t\tcase 1:\n\n\t\t\tmouseAction = this.mouseButtons.MIDDLE;\n\t\t\tbreak;\n\n\t\tcase 2:\n\n\t\t\tmouseAction = this.mouseButtons.RIGHT;\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tmouseAction = - 1;\n\n\t}\n\n\tswitch ( mouseAction ) {\n\n\t\tcase MOUSE.DOLLY:\n\n\t\t\tif ( this.enableZoom === false ) return;\n\n\t\t\tthis._handleMouseDownDolly( event );\n\n\t\t\tthis.state = _STATE.DOLLY;\n\n\t\t\tbreak;\n\n\t\tcase MOUSE.ROTATE:\n\n\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\tif ( this.enablePan === false ) return;\n\n\t\t\t\tthis._handleMouseDownPan( event );\n\n\t\t\t\tthis.state = _STATE.PAN;\n\n\t\t\t} else {\n\n\t\t\t\tif ( this.enableRotate === false ) return;\n\n\t\t\t\tthis._handleMouseDownRotate( event );\n\n\t\t\t\tthis.state = _STATE.ROTATE;\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tcase MOUSE.PAN:\n\n\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\tif ( this.enableRotate === false ) return;\n\n\t\t\t\tthis._handleMouseDownRotate( event );\n\n\t\t\t\tthis.state = _STATE.ROTATE;\n\n\t\t\t} else {\n\n\t\t\t\tif ( this.enablePan === false ) return;\n\n\t\t\t\tthis._handleMouseDownPan( event );\n\n\t\t\t\tthis.state = _STATE.PAN;\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tthis.state = _STATE.NONE;\n\n\t}\n\n\tif ( this.state !== _STATE.NONE ) {\n\n\t\tthis.dispatchEvent( _startEvent );\n\n\t}\n\n}\n\nfunction onMouseMove( event ) {\n\n\tswitch ( this.state ) {\n\n\t\tcase _STATE.ROTATE:\n\n\t\t\tif ( this.enableRotate === false ) return;\n\n\t\t\tthis._handleMouseMoveRotate( event );\n\n\t\t\tbreak;\n\n\t\tcase _STATE.DOLLY:\n\n\t\t\tif ( this.enableZoom === false ) return;\n\n\t\t\tthis._handleMouseMoveDolly( event );\n\n\t\t\tbreak;\n\n\t\tcase _STATE.PAN:\n\n\t\t\tif ( this.enablePan === false ) return;\n\n\t\t\tthis._handleMouseMovePan( event );\n\n\t\t\tbreak;\n\n\t}\n\n}\n\nfunction onMouseWheel( event ) {\n\n\tif ( this.enabled === false || this.enableZoom === false || this.state !== _STATE.NONE ) return;\n\n\tevent.preventDefault();\n\n\tthis.dispatchEvent( _startEvent );\n\n\tthis._handleMouseWheel( this._customWheelEvent( event ) );\n\n\tthis.dispatchEvent( _endEvent );\n\n}\n\nfunction onKeyDown( event ) {\n\n\tif ( this.enabled === false || this.enablePan === false ) return;\n\n\tthis._handleKeyDown( event );\n\n}\n\nfunction onTouchStart( event ) {\n\n\tthis._trackPointer( event );\n\n\tswitch ( this._pointers.length ) {\n\n\t\tcase 1:\n\n\t\t\tswitch ( this.touches.ONE ) {\n\n\t\t\t\tcase TOUCH.ROTATE:\n\n\t\t\t\t\tif ( this.enableRotate === false ) return;\n\n\t\t\t\t\tthis._handleTouchStartRotate( event );\n\n\t\t\t\t\tthis.state = _STATE.TOUCH_ROTATE;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase TOUCH.PAN:\n\n\t\t\t\t\tif ( this.enablePan === false ) return;\n\n\t\t\t\t\tthis._handleTouchStartPan( event );\n\n\t\t\t\t\tthis.state = _STATE.TOUCH_PAN;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tthis.state = _STATE.NONE;\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tcase 2:\n\n\t\t\tswitch ( this.touches.TWO ) {\n\n\t\t\t\tcase TOUCH.DOLLY_PAN:\n\n\t\t\t\t\tif ( this.enableZoom === false && this.enablePan === false ) return;\n\n\t\t\t\t\tthis._handleTouchStartDollyPan( event );\n\n\t\t\t\t\tthis.state = _STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase TOUCH.DOLLY_ROTATE:\n\n\t\t\t\t\tif ( this.enableZoom === false && this.enableRotate === false ) return;\n\n\t\t\t\t\tthis._handleTouchStartDollyRotate( event );\n\n\t\t\t\t\tthis.state = _STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tthis.state = _STATE.NONE;\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tthis.state = _STATE.NONE;\n\n\t}\n\n\tif ( this.state !== _STATE.NONE ) {\n\n\t\tthis.dispatchEvent( _startEvent );\n\n\t}\n\n}\n\nfunction onTouchMove( event ) {\n\n\tthis._trackPointer( event );\n\n\tswitch ( this.state ) {\n\n\t\tcase _STATE.TOUCH_ROTATE:\n\n\t\t\tif ( this.enableRotate === false ) return;\n\n\t\t\tthis._handleTouchMoveRotate( event );\n\n\t\t\tthis.update();\n\n\t\t\tbreak;\n\n\t\tcase _STATE.TOUCH_PAN:\n\n\t\t\tif ( this.enablePan === false ) return;\n\n\t\t\tthis._handleTouchMovePan( event );\n\n\t\t\tthis.update();\n\n\t\t\tbreak;\n\n\t\tcase _STATE.TOUCH_DOLLY_PAN:\n\n\t\t\tif ( this.enableZoom === false && this.enablePan === false ) return;\n\n\t\t\tthis._handleTouchMoveDollyPan( event );\n\n\t\t\tthis.update();\n\n\t\t\tbreak;\n\n\t\tcase _STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\tif ( this.enableZoom === false && this.enableRotate === false ) return;\n\n\t\t\tthis._handleTouchMoveDollyRotate( event );\n\n\t\t\tthis.update();\n\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tthis.state = _STATE.NONE;\n\n\t}\n\n}\n\nfunction onContextMenu( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tevent.preventDefault();\n\n}\n\nfunction interceptControlDown( event ) {\n\n\tif ( event.key === 'Control' ) {\n\n\t\tthis._controlActive = true;\n\n\t\tconst document = this.domElement.getRootNode(); // offscreen canvas compatibility\n\n\t\tdocument.addEventListener( 'keyup', this._interceptControlUp, { passive: true, capture: true } );\n\n\t}\n\n}\n\nfunction interceptControlUp( event ) {\n\n\tif ( event.key === 'Control' ) {\n\n\t\tthis._controlActive = false;\n\n\t\tconst document = this.domElement.getRootNode(); // offscreen canvas compatibility\n\n\t\tdocument.removeEventListener( 'keyup', this._interceptControlUp, { passive: true, capture: true } );\n\n\t}\n\n}\n\nexport { OrbitControls };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}